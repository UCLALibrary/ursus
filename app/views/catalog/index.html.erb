<!-- SINAI -->
<% if Flipflop.sinai? %>
  <!--% unless has_search_parameters? % -->
  <% if current_page?(root_path) %>
    <%# if there are no input/search related params,
              display the "sitelinks_search_box" partial -%>
    <%= render 'shared/sitelinks_search_box' %>
    <%= render 'homepage_sinai' %>

  <% else %>
    <div class='content-container--index-page'>
      <%= render 'facets' %>
      <%= render 'search_results' %>
    </div>
  <% end %>

<!-- URSUS -->
<% else %>
  <% unless has_search_parameters? %>
    <%# if there are no input/search related params,
              display the "home" partial -%>
    <%= render 'home' %>

  <% else %>
    <div class='content-container--index-page'>
      <%= render 'facets' %>
      <%= render 'search_results' %>
    </div>
  <% end %>

  <!-- if URL contains catalog with a sort option, remove sort option (illegal combination) -->
  <!-- else if URL (contians an empty query OR empty square brackets) AND ((contains "members of collections") OR (contains a sort term AND does not contain the Start Over string)) -->
  <!--   add Title Sort string to URL -->
  <!--   got to page -->
  <script type="text/javascript">
    var urlFacet = window.location.search;
    if ( urlFacet.indexOf("catalog?sort=" ) !== -1){
      window.history.replaceState('page2', 'Title', '/catalog');
    } else if ( ((urlFacet.indexOf("&q=&") !== -1) || (urlFacet.indexOf("%5B%5D=") !== -1)) && ((urlFacet.indexOf("[member_of_collections_") !== -1) || ((urlFacet.indexOf("&sort=") == -1) && (urlFacet != "?utf8=%E2%9C%93&q=&search_field=all_fields"))) ) {
        var titleSortUrl = urlFacet+"&sort=title_alpha_numeric_ssort+asc";
        window.location = titleSortUrl;
    }
  </script>
<% end %>
